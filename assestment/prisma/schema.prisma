// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url  	    = env("DATABASE_URL")
  directUrl = env("DATABASE_URL_UNPOOLED") // those errors is caused because of prisma extension that use -v 7
}

model Employee {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String   
  role      Role     @default(INTERN)
  password  String   // @unique is not needed if whe hash and salt the password
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Role {
  INTERN
  ENGINEER
  ADMIN
} // define user roles

// use npx prisma migrate dev --name init to initialize the db and schemas.(migrations folder will appear in prisma folder). ps 'init' crea la prima migrazione (come git init)
// migrate is like a github reference that tracks db changes, and update the db if we add a column 
// in the table or create a new table. or go back to older commits 

// use npx prisma db push to push the changes to the db without creating migration files

// use deploy ideally used for production databases

// everytime we make changes (adding new column or create new table) to the schema.prisma file 
// we need to run first:
// 1) npx prisma migrate dev --name name_change(a different commit name), to save and commit db changes up to date w
// 2) npx prisma generate command:
// -- migration transate prisma syntax to sql syntax (remember that if you comment the migration.file, it could be blocked you to generete another migration)

// npx prisma migrate reset  (to reset all migration in case there are conflicts when migrating/generatin changes. 
// Be carefull, data will be lost, use it in dev)